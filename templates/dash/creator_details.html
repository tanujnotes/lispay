{% extends "dash/base_dash.html" %}
{% load staticfiles %}

{% block title %}Lisplay - Creator Details{% endblock %}

{% block sidebar %}
<div class="sidebar" data-color="purple" data-image="{% static 'img/sidebar-3.jpg' %}">

    <!--
        Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"

        Tip 2: you can also add an image using data-image tag
    -->

    <div class="logo">
        <a href="{% url 'index' %}" class="simple-text">
            Lisplay
        </a>
    </div>

    <div class="sidebar-wrapper">
        <ul class="nav">
            <li>
                <a href="{% url 'dashboard' %}">
                    <i class="fa fa-dashboard"></i>
                    <p>Dashboard</p>
                </a>
            </li>
            <li>
                <a href="{% url 'update_profile' %}">
                    <i class="fa fa-user"></i>
                    <p>User Profile</p>
                </a>
            </li>
            <li class="active">
                <a href="{% url 'creator_details' %}">
                    <i class="fa fa-pie-chart"></i>
                    <p>Creator Details</p>
                </a>
            </li>
            <li class="active-pro">
                <a href="{% url 'show_user_profile' user.username %}">
                    <i class="fa fa-arrow-left"></i>
                    <p>Back to profile</p>
                </a>
            </li>
        </ul>
    </div>

</div>
{% endblock %}

{% block content %}
<script src="{% static 'dash/js/jquery-3.1.0.min.js' %}" type="text/javascript"></script>
<script src="{% static 'dash/js/bootstrap.min.js' %}" type="text/javascript"></script>
<script type="text/javascript">
    jQuery(function($){
        $('[data-toggle="popover"]').popover();
    });

    function checkboxAlert(checkbox) {
        if ((!checkbox.checked) && ("{{ user.is_creator }}")) {
            alert ("If you want to disable the creator account, please write to us at support@lisplay.com");
            checkbox.checked = true;
        }
    }
</script>

<div class="container-fluid">
    {% if message %}
    <div data-notify="container"
         class="col-xs-11 col-sm-4 alert alert-success alert-with-icon animated fadeInDown"
         role="alert" data-notify-position="top-right"
         style="display: inline-block; margin: 0px auto; position: fixed; transition: all 0.5s ease-in-out; z-index: 1031; top: 20px; right: 20px;">
        <button type="button" class="close" aria-hidden="true" data-notify="dismiss"
                data-dismiss="alert" aria-label="Close"
                style="position: absolute; right: 10px; top: 50%; margin-top: -13px; z-index: 1033;">
            <i class="fa fa-close"></i>
        </button>
        <i data-notify="icon" class="fa fa-check"></i>
        <span data-notify="title"></span>
        <span data-notify="message">{{ message }}</span>
    </div>
    {% endif %}

    {% if errors %}
    <div data-notify="container"
         class="col-xs-11 col-sm-4 alert alert-danger alert-with-icon animated fadeInDown"
         role="alert" data-notify-position="top-right"
         style="display: inline-block; margin: 0px auto; position: fixed; transition: all 0.5s ease-in-out; z-index: 1031; top: 20px; right: 20px;">
        <button type="button" class="close" aria-hidden="true" data-notify="dismiss"
                data-dismiss="alert" aria-label="Close"
                style="position: absolute; right: 10px; top: 50%; margin-top: -13px; z-index: 1033;">
            <i class="fa fa-close"></i>
        </button>
        <i data-notify="icon" class="fa fa-warning"></i>
        <span data-notify="title"></span>
        <span data-notify="message">{{ errors }}</span>
    </div>
    {% endif %}

    <div class="row">
        <div class="col-md-8">
            <form class="form" method="post" enctype="multipart/form-data" action=".">
                {% csrf_token %}
                <div class="card">
                    <div class="card-header" data-background-color="purple">
                        <h4 class="title">Creator Details</h4>
                        <p class="category">Fill out this form and your creator profile is ready</p>
                    </div>
                    <div class="card-content">
                        <div class="row form-group">
                            <h4>Are you a creator?</h4>
                            <p>If yes, turn this on and fill all the required details down below.</p>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group togglebutton">
                                    <label>
                                        <input type="checkbox" name="is_creator" id="id_is_creator"
                                               onchange="checkboxAlert(this)"
                                               {% if user.is_creator %}checked{% endif %} required>
                                        This is a creator account
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="row form-group">
                            <h4>Category</h4>
                            <p>Choose a category that best defines your work.</p>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    {{ form.category }}
                                </div>
                            </div>
                        </div>

                        <div class="row form-group">
                            <h4>Full Name</h4>
                            <p>Please enter your (or your group's) full name. [Max 30 characters]</p>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group label-floating">
                                    <label class="control-label">Full name</label>
                                    <input type="text" name="full_name" id="id_full_name" class="form-control"
                                           maxlength="30" value="{{ form.full_name.value }}" required/>
                                </div>
                            </div>
                        </div>

                        <div class="row form-group">
                            <h4>Short Bio</h4>
                            <p>Tell us about work in one small line. [Max 50 characters]</p>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group label-floating">
                                    <label class="control-label">Short bio</label>
                                    <input type="text" class="form-control" name="short_bio" id="id_short_bio"
                                           placeholder="Short bio (e.g. I create music videos and travel vlogs)"
                                           minlength="10" maxlength="50" value="{{ user.short_bio }}" required/>
                                </div>
                            </div>
                        </div>

                        <div class="row form-group">
                            <h4>Profile Description</h4>
                            <p>Please write a detailed description about what you do. [Max 1000 characters]</p>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group label-floating">
                                    <label class="control-label">Profile description</label>
                                    <textarea class="form-control" rows="3" name="profile_description"
                                              id="id_profile_description" minlength="100" maxlength="1000"
                                              required>{{ user.profile_description }}</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="row form-group">
                            <h4>Thank You Note</h4>
                            <p>A thank you message to show to your fans right after they have subscribed to you.
                                [Max 200 characters]</p>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group label-floating">
                                    <label class="control-label">Thank you note</label>
                                    <textarea class="form-control" rows="3" name="featured_text" id="id_featured_text"
                                              minlength="50" maxlength="200"
                                              required>{{ user.featured_text }}</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="row form-group">
                            <h4>Featured Video <span class="text-gray"> (optional)</span></h4>
                            <div class="stats" data-placement="top" title="No YouTube Video?" data-toggle="popover"
                                 data-content="If you don't have a YouTube channel/video, just shoot a short video
                                 using your smartphone and send it to us. We will upload it on our channel and feature
                                 it on your Lisplay page. We'll assist you with the whole process; just send us an
                                 email at support@lisplay.com">
                                <p>Please enter a YouTube link of your work or an introduction video. The video will be
                                    featured on your profile. <a href="#">Need help?</a>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group label-floating">
                                    <label class="control-label">Featured video link</label>
                                    <input type="url" class="form-control" name="featured_video" id="id_featured_video"
                                           value="{{ user.featured_video }}"/>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-round btn-lg pull-right">
                            Update Profile
                        </button>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </form>
        </div>

        <!--User Card-->
        <div class="col-md-4">
            <a href="{% url 'show_user_profile' user.username %}">
                <div class="card card-profile">
                    <div class="card-avatar">
                        <img class="img" src="{{ user.thumbnail.url }}"/>
                    </div>
                    <div class="content">
                        <h4 class="card-title">{{ user.full_name }}</h4>
                        <p class="text-muted">{{ "@"|add:user.username }}</p>
                        <h6 class="category text-gray">{{ user.short_bio }}</h6>
                    </div>
                </div>
            </a>
        </div>
        <!--End: User Card-->
    </div>
</div>

{% endblock %}